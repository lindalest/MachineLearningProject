<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Machinelearningproject by lindalest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Machinelearningproject</h1>
      <h2 class="project-tagline">HTML of project for Machine Learning Coursera course</h2>
      <a href="https://github.com/lindalest/MachineLearningProject" class="btn">View on GitHub</a>
      <a href="https://github.com/lindalest/MachineLearningProject/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/lindalest/MachineLearningProject/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <hr>

<p>title: "Machine Learning Project"
author: "Linda Lester"
date: "August 4, 2015"</p>

<h2>
<a id="output-html_document" class="anchor" href="#output-html_document" aria-hidden="true"><span class="octicon octicon-link"></span></a>output: html_document</h2>

<h2>
<a id="executive-summary" class="anchor" href="#executive-summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Executive Summary</h2>

<p>The goal of this project is to predict the manner of the exercise, classe,  by building a model using one of several variables available in the data base.  The data base is a collection of exercise m ovements captured using devices such as Jawbone and Fitbit.  Six individuals were recorded and the quality of their exercise was graded from A-E, with A indicating the exercise was performed correctly.  Using this data set I trained a model to identify the exercise quality and used this model to correctly predict the exercise grad for 20 unknowns.</p>

<h3>
<a id="cleaning-the-data" class="anchor" href="#cleaning-the-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cleaning the Data</h3>

<p>I reviewed the data set and noted that the first few columns contained descriptive data such as the date and time of the exercise.  This data was not useful for the purpose of predicting the exercise quality and was removed.  In addition, several other columns contained predominatey blanks or NAs.  These columns were removed as well to produce a smaller, neater data set of 53 variables, all of which were likely to improve the prediction of exercise quality.</p>

<div class="highlight highlight-r,"><pre>library(<span class="pl-smi">dplyr</span>)
library(<span class="pl-smi">ggplot2</span>)
library(<span class="pl-smi">tidyr</span>)
library(<span class="pl-smi">lattice</span>)
library(<span class="pl-smi">caret</span>)
library(<span class="pl-smi">AppliedPredictiveModeling</span>)
library(<span class="pl-smi">randomForest</span>)
library(<span class="pl-smi">rpart</span>)
library(<span class="pl-smi">rattle</span>)

<span class="pl-smi">pml</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s"><span class="pl-pds">"</span>pml-training.csv<span class="pl-pds">"</span></span>, <span class="pl-v">stringsAsFactors</span><span class="pl-k">=</span><span class="pl-c1">F</span>)
<span class="pl-smi">sub</span> <span class="pl-k">&lt;-</span> select(<span class="pl-smi">pml</span>, c(<span class="pl-smi">roll_belt</span><span class="pl-k">:</span><span class="pl-smi">total_accel_belt</span>, <span class="pl-smi">gyros_belt_x</span><span class="pl-k">:</span><span class="pl-smi">total_accel_arm</span>, <span class="pl-smi">gyros_arm_x</span><span class="pl-k">:</span><span class="pl-smi">magnet_arm_z</span>, <span class="pl-smi">roll_dumbbell</span><span class="pl-k">:</span><span class="pl-smi">yaw_dumbbell</span>, <span class="pl-smi">total_accel_dumbbell</span>, <span class="pl-smi">gyros_dumbbell_x</span><span class="pl-k">:</span><span class="pl-smi">yaw_forearm</span>, <span class="pl-smi">total_accel_forearm</span>, <span class="pl-smi">gyros_forearm_x</span><span class="pl-k">:</span><span class="pl-smi">classe</span>))
<span class="pl-smi">newsub</span> <span class="pl-k">&lt;-</span> mutate(<span class="pl-smi">sub</span>, <span class="pl-v">fcasse</span><span class="pl-k">=</span>as.factor(<span class="pl-smi">classe</span>))
<span class="pl-smi">newsub</span><span class="pl-k">$</span><span class="pl-smi">classe</span> <span class="pl-k">&lt;-</span> <span class="pl-c1">NULL</span></pre></div>

<h2>
<a id="developing-a-algorithm-to-predict-exericse-quality" class="anchor" href="#developing-a-algorithm-to-predict-exericse-quality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developing a algorithm to predict exericse quality</h2>

<p>I first split 80% of the data into the training group, leaving 20% for the testing group. I did an initial evaluation of the variables training the model with the "rpart" method. The branching diagram graph can be found in file name Rplot-Exercise.png. </p>

<div class="highlight highlight-r"><pre>View(<span class="pl-smi">newsub</span>)
set.seed(<span class="pl-c1">7598</span>)
<span class="pl-v">trainpml</span> <span class="pl-k">=</span> createDataPartition(<span class="pl-smi">newsub</span><span class="pl-k">$</span><span class="pl-smi">fcasse</span>, <span class="pl-v">p</span> <span class="pl-k">=</span><span class="pl-c1">0.80</span>, <span class="pl-v">list</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>)
<span class="pl-v">training</span> <span class="pl-k">=</span> <span class="pl-smi">newsub</span>[<span class="pl-smi">trainpml</span>,]
<span class="pl-v">testing</span> <span class="pl-k">=</span> <span class="pl-smi">newsub</span>[<span class="pl-k">-</span><span class="pl-smi">trainpml</span>,]
set.seed(<span class="pl-c1">1001</span>)
<span class="pl-smi">fit2</span>  <span class="pl-k">&lt;-</span> train(<span class="pl-smi">training</span><span class="pl-k">$</span><span class="pl-smi">fcasse</span><span class="pl-k">~</span>., <span class="pl-v">data</span> <span class="pl-k">=</span> <span class="pl-smi">training</span>, <span class="pl-v">method</span> <span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>rpart<span class="pl-pds">"</span></span>)
print(<span class="pl-smi">fit2</span>, <span class="pl-v">digits</span><span class="pl-k">=</span><span class="pl-c1">3</span>)
fancyRpartPlot(<span class="pl-smi">fit2</span><span class="pl-k">$</span><span class="pl-smi">finalModel</span>)</pre></div>

<p>After evaluating the variables I choose the random forest method for training because it works with classification data as found in this data base and is capable of dealing with a high noise rate. I used cross validation in my model.</p>

<div class="highlight highlight-r"><pre><span class="pl-smi">fit1a</span> <span class="pl-k">&lt;-</span> train( <span class="pl-smi">fcasse</span> <span class="pl-k">~</span> ., <span class="pl-v">method</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>rf<span class="pl-pds">"</span></span>, <span class="pl-v">data</span><span class="pl-k">=</span><span class="pl-smi">training</span>, <span class="pl-v">trcontrol</span><span class="pl-k">=</span> trainControl(<span class="pl-v">method</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>cv<span class="pl-pds">"</span></span>, <span class="pl-v">number</span> <span class="pl-k">=</span><span class="pl-c1">7</span>), <span class="pl-v">prox</span><span class="pl-k">=</span> <span class="pl-c1">TRUE</span>, <span class="pl-v">allowParallel</span><span class="pl-k">=</span><span class="pl-c1">TRUE</span>) 
<span class="pl-smi">tr</span> <span class="pl-k">&lt;-</span> getTree(<span class="pl-smi">fit1a</span><span class="pl-k">$</span><span class="pl-smi">finalMode</span>)
printRandomForests(<span class="pl-smi">fit1a</span>, <span class="pl-v">models</span><span class="pl-k">=</span><span class="pl-c1">NULL</span>)
print(<span class="pl-smi">fit1a</span><span class="pl-k">$</span><span class="pl-smi">finalModel</span>)
<span class="pl-smi">ErrorPlot</span> <span class="pl-k">&lt;-</span> plot(<span class="pl-smi">tr</span>, <span class="pl-v">main</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Classification Tree<span class="pl-pds">"</span></span>)</pre></div>

<h2>
<a id="estimating-error-with-cross-validation" class="anchor" href="#estimating-error-with-cross-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Estimating Error with Cross Validation</h2>

<p>I used cross validation to predict the error rate. 
The estimated out of bag error for this model was 0.58% based upon the training set data. 
When the model was applied to the testing data set the calculated error rate was 0.008% better than the estimate OOB.The accuracy rate was caculated at 99.23% using this model.</p>

<div class="highlight highlight-r"><pre><span class="pl-smi">testa</span> <span class="pl-k">&lt;-</span> predict(<span class="pl-smi">fit1a</span>, <span class="pl-smi">testing</span>)
getTree(<span class="pl-smi">testa</span>)
plot(<span class="pl-smi">testa</span>) <span class="pl-k">+</span> <span class="pl-smi">testa</span> <span class="pl-k">+</span>geom_map(<span class="pl-v">fill</span><span class="pl-k">=</span><span class="pl-smi">Freq</span>)</pre></div>

<h2>
<a id="use-model-to-predict-class-in-new-test-data" class="anchor" href="#use-model-to-predict-class-in-new-test-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use model to predict class in new test data</h2>

<p>The model developed above was used to predict the unknowns provided in the assignment.  The model accurately predicated the classe for the 20 unknowns.</p>

<div class="highlight highlight-r,"><pre><span class="pl-smi">pmltest</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s"><span class="pl-pds">"</span>pml-testing.csv<span class="pl-pds">"</span></span>, <span class="pl-v">stringsAsFactors</span> <span class="pl-k">=</span> <span class="pl-c1">FALSE</span>)
View(<span class="pl-smi">pmltest</span>)
predict(<span class="pl-smi">fit1a</span>, <span class="pl-smi">pmltest</span>)</pre></div>

<p>Answers: BABAAEDBAABCBAEEABBB</p>

<h2>
<a id="summary" class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>I produced a model using the random forest method that identified the correct class of exercise with excellent accuracy, &gt; 98%. Evaluating the model I determined that roll belt was the initial branch point, followed by the pitch forearm and magnet dumbbell,  These variables accounted for them majority of the accuracy. This model allowed me to correctly identify the unknown excerises.  The data for this model was originally published in 
Velloso, E.; Bulling, A.; Gellersen, H.; Ugulino, W.; Fuks, H. Qualitative Activity Recognition of Weight Lifting Exercises. Proceedings of 4th International Conference in Cooperation with SIGCHI (Augmented Human '13) . Stuttgart, Germany: ACM SIGCHI, 2013.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/lindalest/MachineLearningProject">Machinelearningproject</a> is maintained by <a href="https://github.com/lindalest">lindalest</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
